<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="netfuMyService">

	<!-- 맞춤 채용정보  -->
	<select id="selectNetfuMyServiceMap" parameterType="hashmap" resultType="allwork.vo.NetfuMyServiceVo">
		select 
			no, uid
			, job1, getCodeName(job1) job1_name
			, job2, getCodeName(job2) job2_name
			, job3, getCodeName(job3) job3_name
			, job4, getCodeName(job4) job4_name
			, job5, getCodeName(job5) job5_name
			, job6, getCodeName(job6) job6_name
			, job7, getCodeName(job7) job7_name
			, job8, getCodeName(job8) job8_name
			, job9, getCodeName(job9) job9_name
			, area, getCodeName(area) area_name
			, area2, getCodeName(area2) area2_name
			, area3, getCodeName(area3) area3_name
			, area4, getCodeName(area4) area4_name
			, area5, getCodeName(area5) area5_name
			, area6, getCodeName(area6) area6_name
			, sex, age
			, form, getCodeName(form) form_name
			, school
			, career
			, pay_type, getCodeName(pay_type) pay_type_name
			, pay, getCodeName(pay) pay_name
		from netfu_my_service
		where 1=1
			and uid = #{loginId}
	</select>
	
	
	<!-- 맞춤 채용정보 검색 Count -->
	<select id="selectMyServiceRecruitCnt" parameterType="hashmap" resultType="int">
		select count(no) cnt
		from netfu_item_company
		where 1=1
			and biz_ing <![CDATA[<>]]> 'yes'
			and biz_end_day <![CDATA[>=]]> CURRENT_TIMESTAMP()
	</select>
	
	
	<!-- 맞춤 채용정보 목록 -->
	<select id="selectMyServiceRecruitList" parameterType="hashmap" resultType="allwork.vo.NetfuItemCompanyVo">
		select 
			no, uid, info_type, biz_name, biz_title, 'open', biz_post, biz_address1, biz_address2, 
			biz_type1, getCodeName(biz_type1) biz_type1_name,
			biz_type2, getCodeName(biz_type2) biz_type2_name,
			biz_type3, getCodeName(biz_type3) biz_type3_name,
			biz_type4, getCodeName(biz_type4) biz_type4_name,
			biz_type5, getCodeName(biz_type5) biz_type5_name,
			biz_type6, getCodeName(biz_type6) biz_type6_name,
			biz_type7, getCodeName(biz_type7) biz_type7_name,
			biz_type8, getCodeName(biz_type8) biz_type8_name,
			biz_type9, getCodeName(biz_type9) biz_type9_name,
			biz_position, 
			biz_area1, getCodeName(biz_area1) biz_area1_name,
			biz_area2, getCodeName(biz_area2) biz_area2_name,
			biz_area3, getCodeName(biz_area3) biz_area3_name,
			biz_area4, getCodeName(biz_area4) biz_area4_name,
			biz_area5, getCodeName(biz_area5) biz_area5_name,
			biz_area6, getCodeName(biz_area6) biz_area6_name,
			biz_subway, biz_business, biz_men,
			biz_jobfrom, getCodeName(biz_jobfrom) biz_jobfrom_name,
			biz_pay, getCodeName(biz_pay) biz_pay_name,
			biz_welfare, biz_sex, biz_age, biz_ability,
			biz_preferential, getCodeName(biz_preferential) biz_preferential_name,
			biz_career, biz_detail, biz_end_day, biz_end_type, biz_ing, 
			biz_method, getCodeName(biz_method) biz_method_name,
			biz_person, biz_pemail, biz_pphone, biz_pfax, 
			DATE_FORMAT(wdate, '%Y-%m-%d') wdate,
			DATE_FORMAT(u_wdate, '%Y-%m-%d') u_wdate,
			DATE_FORMAT(j_wdate, '%Y-%m-%d') j_wdate,
			service1, service2, service3, service4, service5, service100,
			service6, service7, service8, service9, service10, service11,
			biz_paper, getCodeName(biz_paper) biz_paper_name,
			biz_form, biz_form_file, sms_send, biz_page, hit, type_r, order_view
		from netfu_item_company nic
		where 1=1
			and biz_ing <![CDATA[<>]]> 'yes'
			and biz_end_day <![CDATA[>=]]> CURRENT_TIMESTAMP()
			<if test="orderRule != null and orderRule != ''">
				order by ${orderRule}	
			</if>
		limit #{start}, #{pageSize}
	</select>
	
	
	
	<!-- 맞춤 인재 정보 검색 Count -->
	<select id="selectMyServiceResumeCnt" parameterType="hashmap" resultType="int">
		select count(no) cnt
		from netfu_item_resume
		where 1=1
			and inid_secret <![CDATA[<>]]> 'yes'
	</select>
	
	
	<!-- 맞춤 인재 정보 목록 -->
	<select id="selectMyServiceResumeList" parameterType="hashmap" resultType="allwork.vo.NetfuItemResumeVo">
		select 
			${resumeColumn}
			, nm.sex, nm.birth
		from netfu_item_resume nir left outer join netfu_member nm on nir.uid = nm.uid
		where 1=1
			and nir.inid_secret <![CDATA[<>]]> 'yes'
			<if test="loginId != null and loginId != ''">
				and nir.uid = #{loginId}
			</if>
			<if test="orderRule != null and orderRule != ''">
				order by ${orderField} ${orderRule}
			</if>
		limit #{start}, #{pageSize}
	</select>
	

	<!-- 맞춤 채용정보 설정 저장 -->
	<insert id="insertNetfuMyService" parameterType="hashmap">
		<![CDATA[
			insert into netfu_my_service
			(	
				uid, job1, job2, job3, job4, job5, job6, job7, job8, job9
				, area, area2, area3, area4, area5, area6, sex, age, form, school, career, pay_type, pay
			)
			values
			(	#{uid}
				, #{job1}
				, #{job2}
				, #{job3}
				, #{job4}
				, #{job5}
				, #{job6}
				, #{job7}
				, #{job8}
				, #{job9}
				, #{area}
				, #{area2}
				, #{area3}
				, #{area4}
				, #{area5}
				, #{area6}
				, #{sex}
				, #{age}
				, #{form}
				, #{school}
				, #{career}
				, #{payType}
				, #{pay}
			)
		]]>
	</insert>


</mapper>