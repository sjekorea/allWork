<?xml version="1.0" encoding="UTF-8"?>

<beans 
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:task="http://www.springframework.org/schema/task"
	xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd
       	http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd
       	http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.3.xsd
       	http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd" >


	<mvc:annotation-driven>
		<mvc:argument-resolvers>
			<bean class="allwork.common.CustomMapArgumentResolver" />
		</mvc:argument-resolvers>
	</mvc:annotation-driven>
	
	<context:component-scan base-package="allwork">
    	<context:include-filter type="annotation" expression="org.springframework.context.annotation.Configuration"/>
    	<context:include-filter type="annotation" expression="org.springframework.stereotype.Service"/>
    	<context:include-filter type="annotation" expression="org.springframework.stereotype.Repository"/>
    	<context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
    	<context:include-filter type="annotation" expression="org.springframework.stereotype.Component"/>
    	<context:include-filter type="regex" expression="(service|controller|dao)\..*"/>
    </context:component-scan>
	
	<mvc:resources location="/font/" mapping="/font/**" /> 
 	<mvc:resources location="/img/" mapping="/img/**" />  
 	<mvc:resources location="/js/" mapping="/js/**" /> 
	<mvc:resources location="/css/" mapping="/css/**" />
	<mvc:resources location="/peg/" mapping="/peg/**" />
	
	<mvc:interceptors>
		<mvc:interceptor>
			<mvc:mapping path="/**"/>
            <mvc:exclude-mapping path="/"/>
            <mvc:exclude-mapping path="/index.do"/>
            <mvc:exclude-mapping path="/login.do"/>
            <mvc:exclude-mapping path="/logout.do"/>
            <mvc:exclude-mapping path="/personJoin.do"/>
            <mvc:exclude-mapping path="/companyJoin.do"/>
            <mvc:exclude-mapping path="/*Header.do"/>
            <mvc:exclude-mapping path="/*SubMenu.do"/>
            <mvc:exclude-mapping path="/footer.do"/>
            <mvc:exclude-mapping path="/memberAgree*.do"/>
            <mvc:exclude-mapping path="/intro*.do"/>
            <mvc:exclude-mapping path="/partnership*.do"/>
            <mvc:exclude-mapping path="/sitemap.do"/>
            <mvc:exclude-mapping path="/privatePolicy.do"/>
            <mvc:exclude-mapping path="/termsOfService.do"/>
            <mvc:exclude-mapping path="/*.ajax"/>
			<bean id="loginCheckInterceptor" class="allwork.common.interceptor.LoginCheckInterceptor" />
		</mvc:interceptor>
	</mvc:interceptors>

	
	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" p:maxUploadSize="1000000000" />
	<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
	<bean id="jsonView" class="net.sf.json.spring.web.servlet.view.JsonView" p:contentType="application/json;charset=UTF-8" />
	<bean id="viewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver" p:order="0" />
	<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" 
			p:order="0" 
			p:viewClass="org.springframework.web.servlet.view.JstlView" 
			p:prefix="/WEB-INF/views" 
			p:suffix=".jsp"
			p:contentType="text/html;charset=UTF-8" />
			
			
			
	<context:annotation-config />
	<!-- <task:annotation-driven scheduler="scheduler" />
	<task:scheduler id="scheduler" pool-size="10" /> -->
	<tx:annotation-driven proxy-target-class="true"/>
	
</beans>
